:root {
  --nav-bolt-duration: 0.24s;
  --nav-flash-duration: 0.18s;
  --nav-split-duration: 0.32s;
}

/* Page navigation transition effect */
#page-transition {
  position: fixed;
  pointer-events: none;
  z-index: 10000;
  overflow: hidden;
}
#page-transition .line {
  position: absolute;
  top: 50%;
  left: 0;
  width: 100%;
  height: 8px;
  background: linear-gradient(90deg, #66ffff, #ff00cc, #66ffff);
  box-shadow: 0 0 20px rgba(102,255,255,0.7), 0 0 25px rgba(255,0,204,0.7);
  transform: translateY(-50%);
}
#page-transition .line::before,
#page-transition .line::after {
  content: '';
  position: absolute;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(90deg, rgba(102,255,255,0.5), rgba(255,0,204,0.5), rgba(102,255,255,0.5));
}
#page-transition .line::before {
  top: -5px;
}
#page-transition .line::after {
  bottom: -5px;
}

#page-transition .bolt {
  position: absolute;
  top: 50%;
  width: 80px;
  height: 30px;
  transform: translateY(-50%);
  background: linear-gradient(90deg, #fff, #66ffff, #fff);
  filter: drop-shadow(0 0 8px #66ffff) drop-shadow(0 0 16px #fff);
  clip-path: polygon(0 60%, 15% 80%, 10% 100%, 35% 100%, 25% 65%, 45% 85%, 55% 45%, 75% 65%, 70% 20%, 100% 0, 60% 10%, 65% 0, 35% 20%, 40% 0, 20% 10%, 25% 0);
}
#page-transition .bolt.left {
  left: -80px;
  animation: bolt-left var(--nav-bolt-duration, 0.28s) forwards;
}
#page-transition .bolt.right {
  right: -80px;
  animation: bolt-right var(--nav-bolt-duration, 0.28s) forwards;
  transform: translateY(-50%) scaleX(-1);
}
@keyframes bolt-left {
  to { left: 50%; }
}
@keyframes bolt-right {
  to { right: 50%; }
}

#page-transition .flash {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: radial-gradient(circle, #ffffff, rgba(255,255,255,0));
  transform: translate(-50%, -50%) scale(0);
  opacity: 0;
}
#page-transition.flash .bolt {
  opacity: 0;
  transition: opacity calc(var(--nav-bolt-duration, 0.28s) / 2);
}
#page-transition.flash .flash {
  animation: flash-burst var(--nav-flash-duration, 0.22s) forwards;
}
@keyframes flash-burst {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(20); opacity: 0; }
}
#page-transition .percent {
  position: absolute;
  top: calc(50% + 20px);
  left: 50%;
  transform: translate(-50%, 0);
  color: #fff;
  font-size: 14px;
  font-family: Arial, sans-serif;
}
.app-split {
  position: fixed;
  overflow: hidden;
  pointer-events: none;
  z-index: 9999;
}
.app-split.top::after,
.app-split.bottom::before {
  content: '';
  position: absolute;
  left: 0;
  width: 100%;
  height: 8px;
  background: linear-gradient(90deg, #66ffff, #ff00cc, #66ffff);
  box-shadow: 0 0 20px rgba(102,255,255,0.6), 0 0 20px rgba(255,0,204,0.6);
}
.app-split.top::after {
  bottom: -2px;
}
.app-split.bottom::before {
  top: -2px;
}
.app-split.top {
  clip-path: inset(0 0 50% 0);
}
.app-split.bottom {
  clip-path: inset(50% 0 0 0);
}
.app-split.animate.top {
  animation: split-up var(--nav-split-duration, 0.36s) forwards;
}
.app-split.animate.bottom {
  animation: split-down var(--nav-split-duration, 0.36s) forwards;
}
@keyframes split-up {
  to { transform: translateY(-100%); }
}
@keyframes split-down {
  to { transform: translateY(100%); }
}

html.nav-fade .content {
  opacity: 0;
}

html.nav-fade .content.nav-fade-show {
  animation: navFadeIn 1s forwards;
}

@keyframes navFadeIn {
  to { opacity: 1; }
}